function cov_1ct5j52gup(){var path="C:\\Users\\luhav\\OneDrive\\Skrivebord\\Semester 3\\SystemUdvikling\\Eksamens Projekt\\PokemonWebsite\\Lock-NESS\\routes\\login.js";var hash="21490ed35b9afc3419df3c271a1bb352ba37afa5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\luhav\\OneDrive\\Skrivebord\\Semester 3\\SystemUdvikling\\Eksamens Projekt\\PokemonWebsite\\Lock-NESS\\routes\\login.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:11},end:{line:3,column:39}},"3":{start:{line:4,column:14},end:{line:4,column:45}},"4":{start:{line:7,column:0},end:{line:9,column:3}},"5":{start:{line:8,column:2},end:{line:8,column:42}},"6":{start:{line:11,column:0},end:{line:28,column:3}},"7":{start:{line:12,column:2},end:{line:27,column:3}},"8":{start:{line:13,column:21},end:{line:13,column:38}},"9":{start:{line:14,column:19},end:{line:14,column:36}},"10":{start:{line:15,column:17},end:{line:15,column:64}},"11":{start:{line:16,column:4},end:{line:23,column:5}},"12":{start:{line:17,column:20},end:{line:17,column:84}},"13":{start:{line:18,column:6},end:{line:18,column:43}},"14":{start:{line:19,column:6},end:{line:19,column:84}},"15":{start:{line:20,column:6},end:{line:20,column:24}},"16":{start:{line:22,column:6},end:{line:22,column:29}},"17":{start:{line:25,column:4},end:{line:25,column:21}},"18":{start:{line:26,column:4},end:{line:26,column:27}},"19":{start:{line:30,column:0},end:{line:30,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:16},end:{line:7,column:17}},loc:{start:{line:7,column:41},end:{line:9,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:48},end:{line:28,column:1}},line:11}},branchMap:{"0":{loc:{start:{line:16,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:23,column:5}},{start:{line:16,column:4},end:{line:23,column:5}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"21490ed35b9afc3419df3c271a1bb352ba37afa5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1ct5j52gup=function(){return actualCoverage;};}return actualCoverage;}cov_1ct5j52gup();var express=(cov_1ct5j52gup().s[0]++,require('express'));var router=(cov_1ct5j52gup().s[1]++,express.Router());const db=(cov_1ct5j52gup().s[2]++,require('../database/db.js'));const login=(cov_1ct5j52gup().s[3]++,require('../database/login.js'));/* GET home page. */cov_1ct5j52gup().s[4]++;router.get('/',function(req,res,next){cov_1ct5j52gup().f[0]++;cov_1ct5j52gup().s[5]++;res.render('login',{title:'login'});});cov_1ct5j52gup().s[6]++;router.post('/',async function(req,res,next){cov_1ct5j52gup().f[1]++;cov_1ct5j52gup().s[7]++;try{let brugernavn=(cov_1ct5j52gup().s[8]++,req.body.Username);let password=(cov_1ct5j52gup().s[9]++,req.body.Password);const user=(cov_1ct5j52gup().s[10]++,await db.authenticateUser(brugernavn,password));cov_1ct5j52gup().s[11]++;if(user){cov_1ct5j52gup().b[0][0]++;const token=(cov_1ct5j52gup().s[12]++,login.generateHashToken(brugernavn,login.getCurrentTimestamp()));cov_1ct5j52gup().s[13]++;await db.setToken(token,brugernavn);cov_1ct5j52gup().s[14]++;res.cookie('token',token,{maxAge:90000,path:'/',domain:'localhost'});cov_1ct5j52gup().s[15]++;res.redirect('/');}else{cov_1ct5j52gup().b[0][1]++;cov_1ct5j52gup().s[16]++;res.redirect('/login');}}catch(err){cov_1ct5j52gup().s[17]++;console.log(err);cov_1ct5j52gup().s[18]++;res.redirect('/login');}});cov_1ct5j52gup().s[19]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWN0NWo1Mmd1cCIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZGIiLCJsb2dpbiIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJmIiwicmVuZGVyIiwidGl0bGUiLCJwb3N0IiwiYnJ1Z2VybmF2biIsImJvZHkiLCJVc2VybmFtZSIsInBhc3N3b3JkIiwiUGFzc3dvcmQiLCJ1c2VyIiwiYXV0aGVudGljYXRlVXNlciIsImIiLCJ0b2tlbiIsImdlbmVyYXRlSGFzaFRva2VuIiwiZ2V0Q3VycmVudFRpbWVzdGFtcCIsInNldFRva2VuIiwiY29va2llIiwibWF4QWdlIiwicGF0aCIsImRvbWFpbiIsInJlZGlyZWN0IiwiZXJyIiwiY29uc29sZSIsImxvZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJsb2dpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vZGF0YWJhc2UvZGIuanMnKTtcclxuY29uc3QgbG9naW4gPSByZXF1aXJlKCcuLi9kYXRhYmFzZS9sb2dpbi5qcycpO1xyXG5cclxuLyogR0VUIGhvbWUgcGFnZS4gKi9cclxucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgcmVzLnJlbmRlcignbG9naW4nLCB7IHRpdGxlOiAnbG9naW4nIH0pO1xyXG59KTtcclxuXHJcbnJvdXRlci5wb3N0KCcvJywgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcclxuICB0cnkge1xyXG4gICAgbGV0IGJydWdlcm5hdm4gPSByZXEuYm9keS5Vc2VybmFtZTtcclxuICAgIGxldCBwYXNzd29yZCA9IHJlcS5ib2R5LlBhc3N3b3JkO1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmF1dGhlbnRpY2F0ZVVzZXIoYnJ1Z2VybmF2biwgcGFzc3dvcmQpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgY29uc3QgdG9rZW4gPSBsb2dpbi5nZW5lcmF0ZUhhc2hUb2tlbihicnVnZXJuYXZuLCBsb2dpbi5nZXRDdXJyZW50VGltZXN0YW1wKCkpO1xyXG4gICAgICBhd2FpdCBkYi5zZXRUb2tlbih0b2tlbiwgYnJ1Z2VybmF2bik7XHJcbiAgICAgIHJlcy5jb29raWUoJ3Rva2VuJywgdG9rZW4sIHsgbWF4QWdlOiA5MDAwMCwgcGF0aDogJy8nLCBkb21haW46ICdsb2NhbGhvc3QnIH0pO1xyXG4gICAgICByZXMucmVkaXJlY3QoJy8nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5yZWRpcmVjdCgnL2xvZ2luJyk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgcmVzLnJlZGlyZWN0KCcvbG9naW4nKTtcclxuICB9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoibTdFQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEdBQUksQ0FBQUUsT0FBTyxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUNoQyxHQUFJLENBQUFDLE1BQU0sRUFBQUwsY0FBQSxHQUFBRyxDQUFBLE1BQUdELE9BQU8sQ0FBQ0ksTUFBTSxDQUFDLENBQUMsRUFDN0IsS0FBTSxDQUFBQyxFQUFFLEVBQUFQLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFDdkMsS0FBTSxDQUFBSSxLQUFLLEVBQUFSLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsRUFFN0Msb0JBQUFKLGNBQUEsR0FBQUcsQ0FBQSxNQUNBRSxNQUFNLENBQUNJLEdBQUcsQ0FBQyxHQUFHLENBQUUsU0FBU0MsR0FBRyxDQUFFQyxHQUFHLENBQUVDLElBQUksQ0FBRSxDQUFBWixjQUFBLEdBQUFhLENBQUEsTUFBQWIsY0FBQSxHQUFBRyxDQUFBLE1BQ3ZDUSxHQUFHLENBQUNHLE1BQU0sQ0FBQyxPQUFPLENBQUUsQ0FBRUMsS0FBSyxDQUFFLE9BQVEsQ0FBQyxDQUFDLENBQ3pDLENBQUMsQ0FBQyxDQUFDZixjQUFBLEdBQUFHLENBQUEsTUFFSEUsTUFBTSxDQUFDVyxJQUFJLENBQUMsR0FBRyxDQUFFLGVBQWVOLEdBQUcsQ0FBRUMsR0FBRyxDQUFFQyxJQUFJLENBQUUsQ0FBQVosY0FBQSxHQUFBYSxDQUFBLE1BQUFiLGNBQUEsR0FBQUcsQ0FBQSxNQUM5QyxHQUFJLENBQ0YsR0FBSSxDQUFBYyxVQUFVLEVBQUFqQixjQUFBLEdBQUFHLENBQUEsTUFBR08sR0FBRyxDQUFDUSxJQUFJLENBQUNDLFFBQVEsRUFDbEMsR0FBSSxDQUFBQyxRQUFRLEVBQUFwQixjQUFBLEdBQUFHLENBQUEsTUFBR08sR0FBRyxDQUFDUSxJQUFJLENBQUNHLFFBQVEsRUFDaEMsS0FBTSxDQUFBQyxJQUFJLEVBQUF0QixjQUFBLEdBQUFHLENBQUEsT0FBRyxLQUFNLENBQUFJLEVBQUUsQ0FBQ2dCLGdCQUFnQixDQUFDTixVQUFVLENBQUVHLFFBQVEsQ0FBQyxFQUFDcEIsY0FBQSxHQUFBRyxDQUFBLE9BQzdELEdBQUltQixJQUFJLENBQUUsQ0FBQXRCLGNBQUEsR0FBQXdCLENBQUEsU0FDUixLQUFNLENBQUFDLEtBQUssRUFBQXpCLGNBQUEsR0FBQUcsQ0FBQSxPQUFHSyxLQUFLLENBQUNrQixpQkFBaUIsQ0FBQ1QsVUFBVSxDQUFFVCxLQUFLLENBQUNtQixtQkFBbUIsQ0FBQyxDQUFDLENBQUMsRUFBQzNCLGNBQUEsR0FBQUcsQ0FBQSxPQUMvRSxLQUFNLENBQUFJLEVBQUUsQ0FBQ3FCLFFBQVEsQ0FBQ0gsS0FBSyxDQUFFUixVQUFVLENBQUMsQ0FBQ2pCLGNBQUEsR0FBQUcsQ0FBQSxPQUNyQ1EsR0FBRyxDQUFDa0IsTUFBTSxDQUFDLE9BQU8sQ0FBRUosS0FBSyxDQUFFLENBQUVLLE1BQU0sQ0FBRSxLQUFLLENBQUVDLElBQUksQ0FBRSxHQUFHLENBQUVDLE1BQU0sQ0FBRSxXQUFZLENBQUMsQ0FBQyxDQUFDaEMsY0FBQSxHQUFBRyxDQUFBLE9BQzlFUSxHQUFHLENBQUNzQixRQUFRLENBQUMsR0FBRyxDQUFDLENBQ25CLENBQUMsSUFBTSxDQUFBakMsY0FBQSxHQUFBd0IsQ0FBQSxTQUFBeEIsY0FBQSxHQUFBRyxDQUFBLE9BQ0xRLEdBQUcsQ0FBQ3NCLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FDeEIsQ0FDRixDQUFFLE1BQU9DLEdBQUcsQ0FBRSxDQUFBbEMsY0FBQSxHQUFBRyxDQUFBLE9BQ1pnQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsR0FBRyxDQUFDLENBQUNsQyxjQUFBLEdBQUFHLENBQUEsT0FDakJRLEdBQUcsQ0FBQ3NCLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FDeEIsQ0FDRixDQUFDLENBQUMsQ0FBQ2pDLGNBQUEsR0FBQUcsQ0FBQSxPQUVIa0MsTUFBTSxDQUFDQyxPQUFPLENBQUdqQyxNQUFNIn0=