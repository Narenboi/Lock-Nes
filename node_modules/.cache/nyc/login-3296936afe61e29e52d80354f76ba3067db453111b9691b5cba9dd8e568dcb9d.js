function cov_28nku7wmif(){var path="C:\\Users\\oruc\\OneDrive\\Skrivebord\\1.semesterprojekt\\Lock-NESS\\routes\\login.js";var hash="3386b42bf025f2d6aaaf23cac619fd713f7768f1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\oruc\\OneDrive\\Skrivebord\\1.semesterprojekt\\Lock-NESS\\routes\\login.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:11},end:{line:3,column:39}},"3":{start:{line:4,column:14},end:{line:4,column:45}},"4":{start:{line:7,column:0},end:{line:9,column:3}},"5":{start:{line:8,column:2},end:{line:8,column:42}},"6":{start:{line:11,column:0},end:{line:28,column:3}},"7":{start:{line:12,column:2},end:{line:27,column:3}},"8":{start:{line:13,column:21},end:{line:13,column:38}},"9":{start:{line:14,column:19},end:{line:14,column:36}},"10":{start:{line:15,column:17},end:{line:15,column:64}},"11":{start:{line:16,column:4},end:{line:23,column:5}},"12":{start:{line:17,column:20},end:{line:17,column:84}},"13":{start:{line:18,column:6},end:{line:18,column:43}},"14":{start:{line:19,column:6},end:{line:19,column:86}},"15":{start:{line:20,column:6},end:{line:20,column:30}},"16":{start:{line:22,column:6},end:{line:22,column:29}},"17":{start:{line:25,column:4},end:{line:25,column:21}},"18":{start:{line:26,column:4},end:{line:26,column:27}},"19":{start:{line:30,column:0},end:{line:30,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:16},end:{line:7,column:17}},loc:{start:{line:7,column:41},end:{line:9,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:48},end:{line:28,column:1}},line:11}},branchMap:{"0":{loc:{start:{line:16,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:23,column:5}},{start:{line:16,column:4},end:{line:23,column:5}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3386b42bf025f2d6aaaf23cac619fd713f7768f1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_28nku7wmif=function(){return actualCoverage;};}return actualCoverage;}cov_28nku7wmif();var express=(cov_28nku7wmif().s[0]++,require('express'));var router=(cov_28nku7wmif().s[1]++,express.Router());const db=(cov_28nku7wmif().s[2]++,require('../database/db.js'));const login=(cov_28nku7wmif().s[3]++,require('../database/login.js'));/* GET home page. */cov_28nku7wmif().s[4]++;router.get('/',function(req,res,next){cov_28nku7wmif().f[0]++;cov_28nku7wmif().s[5]++;res.render('login',{title:'login'});});cov_28nku7wmif().s[6]++;router.post('/',async function(req,res,next){cov_28nku7wmif().f[1]++;cov_28nku7wmif().s[7]++;try{let brugernavn=(cov_28nku7wmif().s[8]++,req.body.Username);let password=(cov_28nku7wmif().s[9]++,req.body.Password);const user=(cov_28nku7wmif().s[10]++,await db.authenticateUser(brugernavn,password));cov_28nku7wmif().s[11]++;if(user){cov_28nku7wmif().b[0][0]++;const token=(cov_28nku7wmif().s[12]++,login.generateHashToken(brugernavn,login.getCurrentTimestamp()));cov_28nku7wmif().s[13]++;await db.setToken(token,brugernavn);cov_28nku7wmif().s[14]++;res.cookie('token',token,{maxAge:1800000,path:'/',domain:'localhost'});cov_28nku7wmif().s[15]++;res.redirect('/myTeam');}else{cov_28nku7wmif().b[0][1]++;cov_28nku7wmif().s[16]++;res.redirect('/login');}}catch(err){cov_28nku7wmif().s[17]++;console.log(err);cov_28nku7wmif().s[18]++;res.redirect('/login');}});cov_28nku7wmif().s[19]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjhua3U3d21pZiIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZGIiLCJsb2dpbiIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJmIiwicmVuZGVyIiwidGl0bGUiLCJwb3N0IiwiYnJ1Z2VybmF2biIsImJvZHkiLCJVc2VybmFtZSIsInBhc3N3b3JkIiwiUGFzc3dvcmQiLCJ1c2VyIiwiYXV0aGVudGljYXRlVXNlciIsImIiLCJ0b2tlbiIsImdlbmVyYXRlSGFzaFRva2VuIiwiZ2V0Q3VycmVudFRpbWVzdGFtcCIsInNldFRva2VuIiwiY29va2llIiwibWF4QWdlIiwicGF0aCIsImRvbWFpbiIsInJlZGlyZWN0IiwiZXJyIiwiY29uc29sZSIsImxvZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJsb2dpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vZGF0YWJhc2UvZGIuanMnKTtcclxuY29uc3QgbG9naW4gPSByZXF1aXJlKCcuLi9kYXRhYmFzZS9sb2dpbi5qcycpO1xyXG5cclxuLyogR0VUIGhvbWUgcGFnZS4gKi9cclxucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgcmVzLnJlbmRlcignbG9naW4nLCB7IHRpdGxlOiAnbG9naW4nIH0pO1xyXG59KTtcclxuXHJcbnJvdXRlci5wb3N0KCcvJywgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcclxuICB0cnkge1xyXG4gICAgbGV0IGJydWdlcm5hdm4gPSByZXEuYm9keS5Vc2VybmFtZTtcclxuICAgIGxldCBwYXNzd29yZCA9IHJlcS5ib2R5LlBhc3N3b3JkO1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmF1dGhlbnRpY2F0ZVVzZXIoYnJ1Z2VybmF2biwgcGFzc3dvcmQpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgY29uc3QgdG9rZW4gPSBsb2dpbi5nZW5lcmF0ZUhhc2hUb2tlbihicnVnZXJuYXZuLCBsb2dpbi5nZXRDdXJyZW50VGltZXN0YW1wKCkpO1xyXG4gICAgICBhd2FpdCBkYi5zZXRUb2tlbih0b2tlbiwgYnJ1Z2VybmF2bik7XHJcbiAgICAgIHJlcy5jb29raWUoJ3Rva2VuJywgdG9rZW4sIHsgbWF4QWdlOiAxODAwMDAwLCBwYXRoOiAnLycsIGRvbWFpbjogJ2xvY2FsaG9zdCcgfSk7XHJcbiAgICAgIHJlcy5yZWRpcmVjdCgnL215VGVhbScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnJlZGlyZWN0KCcvbG9naW4nKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICByZXMucmVkaXJlY3QoJy9sb2dpbicpO1xyXG4gIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJ5MUVBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosR0FBSSxDQUFBRSxPQUFPLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQ2hDLEdBQUksQ0FBQUMsTUFBTSxFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBR0QsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxFQUM3QixLQUFNLENBQUFDLEVBQUUsRUFBQVAsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUN2QyxLQUFNLENBQUFJLEtBQUssRUFBQVIsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxFQUU3QyxvQkFBQUosY0FBQSxHQUFBRyxDQUFBLE1BQ0FFLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLEdBQUcsQ0FBRSxTQUFTQyxHQUFHLENBQUVDLEdBQUcsQ0FBRUMsSUFBSSxDQUFFLENBQUFaLGNBQUEsR0FBQWEsQ0FBQSxNQUFBYixjQUFBLEdBQUFHLENBQUEsTUFDdkNRLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLE9BQU8sQ0FBRSxDQUFFQyxLQUFLLENBQUUsT0FBUSxDQUFDLENBQUMsQ0FDekMsQ0FBQyxDQUFDLENBQUNmLGNBQUEsR0FBQUcsQ0FBQSxNQUVIRSxNQUFNLENBQUNXLElBQUksQ0FBQyxHQUFHLENBQUUsZUFBZU4sR0FBRyxDQUFFQyxHQUFHLENBQUVDLElBQUksQ0FBRSxDQUFBWixjQUFBLEdBQUFhLENBQUEsTUFBQWIsY0FBQSxHQUFBRyxDQUFBLE1BQzlDLEdBQUksQ0FDRixHQUFJLENBQUFjLFVBQVUsRUFBQWpCLGNBQUEsR0FBQUcsQ0FBQSxNQUFHTyxHQUFHLENBQUNRLElBQUksQ0FBQ0MsUUFBUSxFQUNsQyxHQUFJLENBQUFDLFFBQVEsRUFBQXBCLGNBQUEsR0FBQUcsQ0FBQSxNQUFHTyxHQUFHLENBQUNRLElBQUksQ0FBQ0csUUFBUSxFQUNoQyxLQUFNLENBQUFDLElBQUksRUFBQXRCLGNBQUEsR0FBQUcsQ0FBQSxPQUFHLEtBQU0sQ0FBQUksRUFBRSxDQUFDZ0IsZ0JBQWdCLENBQUNOLFVBQVUsQ0FBRUcsUUFBUSxDQUFDLEVBQUNwQixjQUFBLEdBQUFHLENBQUEsT0FDN0QsR0FBSW1CLElBQUksQ0FBRSxDQUFBdEIsY0FBQSxHQUFBd0IsQ0FBQSxTQUNSLEtBQU0sQ0FBQUMsS0FBSyxFQUFBekIsY0FBQSxHQUFBRyxDQUFBLE9BQUdLLEtBQUssQ0FBQ2tCLGlCQUFpQixDQUFDVCxVQUFVLENBQUVULEtBQUssQ0FBQ21CLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxFQUFDM0IsY0FBQSxHQUFBRyxDQUFBLE9BQy9FLEtBQU0sQ0FBQUksRUFBRSxDQUFDcUIsUUFBUSxDQUFDSCxLQUFLLENBQUVSLFVBQVUsQ0FBQyxDQUFDakIsY0FBQSxHQUFBRyxDQUFBLE9BQ3JDUSxHQUFHLENBQUNrQixNQUFNLENBQUMsT0FBTyxDQUFFSixLQUFLLENBQUUsQ0FBRUssTUFBTSxDQUFFLE9BQU8sQ0FBRUMsSUFBSSxDQUFFLEdBQUcsQ0FBRUMsTUFBTSxDQUFFLFdBQVksQ0FBQyxDQUFDLENBQUNoQyxjQUFBLEdBQUFHLENBQUEsT0FDaEZRLEdBQUcsQ0FBQ3NCLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FDekIsQ0FBQyxJQUFNLENBQUFqQyxjQUFBLEdBQUF3QixDQUFBLFNBQUF4QixjQUFBLEdBQUFHLENBQUEsT0FDTFEsR0FBRyxDQUFDc0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUN4QixDQUNGLENBQUUsTUFBT0MsR0FBRyxDQUFFLENBQUFsQyxjQUFBLEdBQUFHLENBQUEsT0FDWmdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLENBQUMsQ0FBQ2xDLGNBQUEsR0FBQUcsQ0FBQSxPQUNqQlEsR0FBRyxDQUFDc0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUN4QixDQUNGLENBQUMsQ0FBQyxDQUFDakMsY0FBQSxHQUFBRyxDQUFBLE9BRUhrQyxNQUFNLENBQUNDLE9BQU8sQ0FBR2pDLE1BQU0ifQ==