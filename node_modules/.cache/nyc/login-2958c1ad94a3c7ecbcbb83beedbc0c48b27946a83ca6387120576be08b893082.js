function cov_gw9ybteza(){var path="C:\\Users\\Kevin\\Documents\\GitHub\\Lock-NESS\\routes\\login.js";var hash="3309e026d29d1d28dfaaac634085264ce434bd4c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Kevin\\Documents\\GitHub\\Lock-NESS\\routes\\login.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:11},end:{line:3,column:39}},"3":{start:{line:4,column:14},end:{line:4,column:45}},"4":{start:{line:7,column:0},end:{line:9,column:3}},"5":{start:{line:8,column:2},end:{line:8,column:42}},"6":{start:{line:11,column:0},end:{line:28,column:3}},"7":{start:{line:12,column:2},end:{line:27,column:3}},"8":{start:{line:13,column:21},end:{line:13,column:38}},"9":{start:{line:14,column:19},end:{line:14,column:36}},"10":{start:{line:15,column:17},end:{line:15,column:64}},"11":{start:{line:16,column:4},end:{line:23,column:5}},"12":{start:{line:17,column:20},end:{line:17,column:84}},"13":{start:{line:18,column:6},end:{line:18,column:43}},"14":{start:{line:19,column:6},end:{line:19,column:84}},"15":{start:{line:20,column:6},end:{line:20,column:24}},"16":{start:{line:22,column:6},end:{line:22,column:29}},"17":{start:{line:25,column:4},end:{line:25,column:21}},"18":{start:{line:26,column:4},end:{line:26,column:27}},"19":{start:{line:30,column:0},end:{line:30,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:16},end:{line:7,column:17}},loc:{start:{line:7,column:41},end:{line:9,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:48},end:{line:28,column:1}},line:11}},branchMap:{"0":{loc:{start:{line:16,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:23,column:5}},{start:{line:16,column:4},end:{line:23,column:5}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3309e026d29d1d28dfaaac634085264ce434bd4c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_gw9ybteza=function(){return actualCoverage;};}return actualCoverage;}cov_gw9ybteza();var express=(cov_gw9ybteza().s[0]++,require('express'));var router=(cov_gw9ybteza().s[1]++,express.Router());const db=(cov_gw9ybteza().s[2]++,require('../database/db.js'));const login=(cov_gw9ybteza().s[3]++,require('../database/login.js'));/* GET home page. */cov_gw9ybteza().s[4]++;router.get('/',function(req,res,next){cov_gw9ybteza().f[0]++;cov_gw9ybteza().s[5]++;res.render('login',{title:'login'});});cov_gw9ybteza().s[6]++;router.post('/',async function(req,res,next){cov_gw9ybteza().f[1]++;cov_gw9ybteza().s[7]++;try{let brugernavn=(cov_gw9ybteza().s[8]++,req.body.Username);let password=(cov_gw9ybteza().s[9]++,req.body.Password);const user=(cov_gw9ybteza().s[10]++,await db.authenticateUser(brugernavn,password));cov_gw9ybteza().s[11]++;if(user){cov_gw9ybteza().b[0][0]++;const token=(cov_gw9ybteza().s[12]++,login.generateHashToken(brugernavn,login.getCurrentTimestamp()));cov_gw9ybteza().s[13]++;await db.setToken(token,brugernavn);cov_gw9ybteza().s[14]++;res.cookie('token',token,{maxAge:90000,path:'/',domain:'localhost'});cov_gw9ybteza().s[15]++;res.redirect('/');}else{cov_gw9ybteza().b[0][1]++;cov_gw9ybteza().s[16]++;res.redirect('/login');}}catch(err){cov_gw9ybteza().s[17]++;console.log(err);cov_gw9ybteza().s[18]++;res.redirect('/login');}});cov_gw9ybteza().s[19]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZ3c5eWJ0ZXphIiwiYWN0dWFsQ292ZXJhZ2UiLCJleHByZXNzIiwicyIsInJlcXVpcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJkYiIsImxvZ2luIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsImYiLCJyZW5kZXIiLCJ0aXRsZSIsInBvc3QiLCJicnVnZXJuYXZuIiwiYm9keSIsIlVzZXJuYW1lIiwicGFzc3dvcmQiLCJQYXNzd29yZCIsInVzZXIiLCJhdXRoZW50aWNhdGVVc2VyIiwiYiIsInRva2VuIiwiZ2VuZXJhdGVIYXNoVG9rZW4iLCJnZXRDdXJyZW50VGltZXN0YW1wIiwic2V0VG9rZW4iLCJjb29raWUiLCJtYXhBZ2UiLCJwYXRoIiwiZG9tYWluIiwicmVkaXJlY3QiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3QgZGIgPSByZXF1aXJlKCcuLi9kYXRhYmFzZS9kYi5qcycpO1xyXG5jb25zdCBsb2dpbiA9IHJlcXVpcmUoJy4uL2RhdGFiYXNlL2xvZ2luLmpzJyk7XHJcblxyXG4vKiBHRVQgaG9tZSBwYWdlLiAqL1xyXG5yb3V0ZXIuZ2V0KCcvJywgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcclxuICByZXMucmVuZGVyKCdsb2dpbicsIHsgdGl0bGU6ICdsb2dpbicgfSk7XHJcbn0pO1xyXG5cclxucm91dGVyLnBvc3QoJy8nLCBhc3luYyBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgYnJ1Z2VybmF2biA9IHJlcS5ib2R5LlVzZXJuYW1lO1xyXG4gICAgbGV0IHBhc3N3b3JkID0gcmVxLmJvZHkuUGFzc3dvcmQ7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIuYXV0aGVudGljYXRlVXNlcihicnVnZXJuYXZuLCBwYXNzd29yZCk7XHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICBjb25zdCB0b2tlbiA9IGxvZ2luLmdlbmVyYXRlSGFzaFRva2VuKGJydWdlcm5hdm4sIGxvZ2luLmdldEN1cnJlbnRUaW1lc3RhbXAoKSk7XHJcbiAgICAgIGF3YWl0IGRiLnNldFRva2VuKHRva2VuLCBicnVnZXJuYXZuKTtcclxuICAgICAgcmVzLmNvb2tpZSgndG9rZW4nLCB0b2tlbiwgeyBtYXhBZ2U6IDkwMDAwLCBwYXRoOiAnLycsIGRvbWFpbjogJ2xvY2FsaG9zdCcgfSk7XHJcbiAgICAgIHJlcy5yZWRpcmVjdCgnLycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnJlZGlyZWN0KCcvbG9naW4nKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICByZXMucmVkaXJlY3QoJy9sb2dpbicpO1xyXG4gIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI4eUVBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlosR0FBSSxDQUFBRSxPQUFPLEVBQUFGLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQ2hDLEdBQUksQ0FBQUMsTUFBTSxFQUFBTCxhQUFBLEdBQUFHLENBQUEsTUFBR0QsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxFQUM3QixLQUFNLENBQUFDLEVBQUUsRUFBQVAsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUN2QyxLQUFNLENBQUFJLEtBQUssRUFBQVIsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxFQUU3QyxvQkFBQUosYUFBQSxHQUFBRyxDQUFBLE1BQ0FFLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLEdBQUcsQ0FBRSxTQUFTQyxHQUFHLENBQUVDLEdBQUcsQ0FBRUMsSUFBSSxDQUFFLENBQUFaLGFBQUEsR0FBQWEsQ0FBQSxNQUFBYixhQUFBLEdBQUFHLENBQUEsTUFDdkNRLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLE9BQU8sQ0FBRSxDQUFFQyxLQUFLLENBQUUsT0FBUSxDQUFDLENBQUMsQ0FDekMsQ0FBQyxDQUFDLENBQUNmLGFBQUEsR0FBQUcsQ0FBQSxNQUVIRSxNQUFNLENBQUNXLElBQUksQ0FBQyxHQUFHLENBQUUsZUFBZU4sR0FBRyxDQUFFQyxHQUFHLENBQUVDLElBQUksQ0FBRSxDQUFBWixhQUFBLEdBQUFhLENBQUEsTUFBQWIsYUFBQSxHQUFBRyxDQUFBLE1BQzlDLEdBQUksQ0FDRixHQUFJLENBQUFjLFVBQVUsRUFBQWpCLGFBQUEsR0FBQUcsQ0FBQSxNQUFHTyxHQUFHLENBQUNRLElBQUksQ0FBQ0MsUUFBUSxFQUNsQyxHQUFJLENBQUFDLFFBQVEsRUFBQXBCLGFBQUEsR0FBQUcsQ0FBQSxNQUFHTyxHQUFHLENBQUNRLElBQUksQ0FBQ0csUUFBUSxFQUNoQyxLQUFNLENBQUFDLElBQUksRUFBQXRCLGFBQUEsR0FBQUcsQ0FBQSxPQUFHLEtBQU0sQ0FBQUksRUFBRSxDQUFDZ0IsZ0JBQWdCLENBQUNOLFVBQVUsQ0FBRUcsUUFBUSxDQUFDLEVBQUNwQixhQUFBLEdBQUFHLENBQUEsT0FDN0QsR0FBSW1CLElBQUksQ0FBRSxDQUFBdEIsYUFBQSxHQUFBd0IsQ0FBQSxTQUNSLEtBQU0sQ0FBQUMsS0FBSyxFQUFBekIsYUFBQSxHQUFBRyxDQUFBLE9BQUdLLEtBQUssQ0FBQ2tCLGlCQUFpQixDQUFDVCxVQUFVLENBQUVULEtBQUssQ0FBQ21CLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxFQUFDM0IsYUFBQSxHQUFBRyxDQUFBLE9BQy9FLEtBQU0sQ0FBQUksRUFBRSxDQUFDcUIsUUFBUSxDQUFDSCxLQUFLLENBQUVSLFVBQVUsQ0FBQyxDQUFDakIsYUFBQSxHQUFBRyxDQUFBLE9BQ3JDUSxHQUFHLENBQUNrQixNQUFNLENBQUMsT0FBTyxDQUFFSixLQUFLLENBQUUsQ0FBRUssTUFBTSxDQUFFLEtBQUssQ0FBRUMsSUFBSSxDQUFFLEdBQUcsQ0FBRUMsTUFBTSxDQUFFLFdBQVksQ0FBQyxDQUFDLENBQUNoQyxhQUFBLEdBQUFHLENBQUEsT0FDOUVRLEdBQUcsQ0FBQ3NCLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FDbkIsQ0FBQyxJQUFNLENBQUFqQyxhQUFBLEdBQUF3QixDQUFBLFNBQUF4QixhQUFBLEdBQUFHLENBQUEsT0FDTFEsR0FBRyxDQUFDc0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUN4QixDQUNGLENBQUUsTUFBT0MsR0FBRyxDQUFFLENBQUFsQyxhQUFBLEdBQUFHLENBQUEsT0FDWmdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLENBQUMsQ0FBQ2xDLGFBQUEsR0FBQUcsQ0FBQSxPQUNqQlEsR0FBRyxDQUFDc0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUN4QixDQUNGLENBQUMsQ0FBQyxDQUFDakMsYUFBQSxHQUFBRyxDQUFBLE9BRUhrQyxNQUFNLENBQUNDLE9BQU8sQ0FBR2pDLE1BQU0ifQ==